local Players = game:GetService("Players")
local player = Players.LocalPlayer  -- Debe ser LocalScript. Si es Script de servidor, no funcionará.

if not player then
    warn("[WHITELIST] Este script debe ejecutarse como LocalScript (LocalPlayer es nil).")
    return
end

-- CONFIGURACIÓN
local allowedUsernames = { -- NOMBRES EXACTOS (Name), no DisplayName
    "keyler632",
    "",
    "",
    "",
    "ANGELHACKS6",
    "Xrip_kevinX5",
    "Santiago178930193",
    "edwart0022",
    "Thomas2345z",
    "Tiomalo68",

}
local allowedUserIds = { -- OPCIONAL: añade IDs si quieres máxima fiabilidad
    -- 12345678, 987654321,
}

-- Normaliza nombres a minúsculas para evitar fallos por mayúsculas
local usernameSet = {}
for _, n in ipairs(allowedUsernames) do
    usernameSet[string.lower(n)] = true
end

local userIdSet = {}
for _, id in ipairs(allowedUserIds) do
    userIdSet[id] = true
end

-- Chequeo
local nameKey = string.lower(player.Name)
local isWhitelisted = usernameSet[nameKey] or userIdSet[player.UserId] or false

if not isWhitelisted then
    warn(string.format("[WHITELIST] %s (UserId %d) NO está autorizado. Abortando script.", player.Name, player.UserId))
    return
end

print(string.format("[WHITELIST] Acceso permitido a %s (UserId %d).", player.Name, player.UserId))

local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/CAXAP26BKyCH/library/refs/heads/main/Uilibrary"))()
local Window = Library:AddWindow("Mileniums Hub V1 | Paid Version", {
    main_color = Color3.fromRGB(255, 0, 0),
    min_size = Vector2.new(500, 600),
    can_resize = true
})
 
local MainTab = Window:AddTab("Main")
local LocalPlayersFolder = MainTab:AddFolder("Local Players")
LocalPlayersFolder:AddSwitch("Auto Eat Protein Egg Every 30 Minutes", function(state)
    getgenv().autoEatProteinEggActive = state
    task.spawn(function()
        while getgenv().autoEatProteinEggActive and LocalPlayer.Character do
            local egg = LocalPlayer.Backpack:FindFirstChild("Protein Egg") or LocalPlayer.Character:FindFirstChild("Protein Egg")
            if egg then
                egg.Parent = LocalPlayer.Character
                ReplicatedStorage.muscleEvent:FireServer("rep")
            end
            task.wait(1800)
        end
    end)
end)
LocalPlayersFolder:AddSwitch("Auto Eat Protein Egg Every 1 hour", function(state)
    getgenv().autoEatProteinEggHourly = state
    task.spawn(function()
        while getgenv().autoEatProteinEggHourly and LocalPlayer.Character do
            local egg = LocalPlayer.Backpack:FindFirstChild("Protein Egg") or LocalPlayer.Character:FindFirstChild("Protein Egg")
            if egg then
                egg.Parent = LocalPlayer.Character
                ReplicatedStorage.muscleEvent:FireServer("rep")
            end
            task.wait(3600)
        end
    end)
end)
local MiscFolder = MainTab:AddFolder("Misc")
MiscFolder:AddSwitch("Auto Farm (Equip Any tool)", function(state)
    getgenv().autoFarm = state
    task.spawn(function()
        while getgenv().autoFarm and LocalPlayer.Character do
            for _, tool in pairs(LocalPlayer.Backpack:GetChildren()) do
                if tool:IsA("Tool") then
                    tool.Parent = LocalPlayer.Character
                    ReplicatedStorage.muscleEvent:FireServer("rep")
                    task.wait(0.1)
                end
            end
            task.wait()
        end
    end)
end)
MiscFolder:AddLabel("---Script Hub---")
MiscFolder:AddButton("Permanent ShiftLock", function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/MiniNoobie/ShiftLockx/main/Shiftlock-MiniNoobie"))()
end)
MiscFolder:AddLabel("---Time---")
MiscFolder:AddButton("Night", function()
    Lighting.ClockTime = 0
end)
MiscFolder:AddButton("Morning", function()
    Lighting.ClockTime = 6
end)
MiscFolder:AddButton("Day", function()
    Lighting.ClockTime = 12
end)
MiscFolder:AddLabel("----Farming----")
local AutoBrawlFolder = MainTab:AddFolder("Auto Brawl")
AutoBrawlFolder:AddSwitch("Auto Win Brawl", function(state)
    getgenv().autoWinBrawl = state
    task.spawn(function()
        while getgenv().autoWinBrawl and LocalPlayer.Character do
            ReplicatedStorage.rEvents.joinBrawl:FireServer("Win")
            task.wait(1)
        end
    end)
end)
AutoBrawlFolder:AddSwitch("Auto Join Brawl (For Farming)", function(state)
    getgenv().autoBrawlFarm = state
    task.spawn(function()
        while getgenv().autoBrawlFarm and LocalPlayer.Character do
            ReplicatedStorage.rEvents.joinBrawl:FireServer("Farm")
            task.wait(1)
        end
    end)
end)
local OpStuffFolder = MainTab:AddFolder("Op stuff (for farm)")
OpStuffFolder:AddSwitch("Anti Knockback", function(state)
    getgenv().antiKnockback = state
    LocalPlayer.CharacterAdded:Connect(function(char)
        if getgenv().antiKnockback then
            char.HumanoidRootPart.Anchored = true
            task.wait(0.1)
            char.HumanoidRootPart.Anchored = false
        end
    end)
end)
OpStuffFolder:AddSwitch("Auto Pushups with Rock (10M) and Auto Punch", function(state)
    getgenv().autoPushups10M = state
    task.spawn(function()
        while getgenv().autoPushups10M and LocalPlayer.Character do
            local pushups = LocalPlayer.Backpack:FindFirstChild("Pushups") or LocalPlayer.Character:FindFirstChild("Pushups")
            if pushups then
                pushups.Parent = LocalPlayer.Character
                ReplicatedStorage.muscleEvent:FireServer("rep")
                local rock = Workspace.machinesFolder:FindFirstChild("Ancient Jungle Rock")
                if rock and LocalPlayer:FindFirstChild("Durability") and LocalPlayer.Durability.Value >= 10000000 then
                    firetouchinterest(rock.Rock, LocalPlayer.Character.RightHand, 0)
                    firetouchinterest(rock.Rock, LocalPlayer.Character.LeftHand, 0)
                    task.wait()
                    firetouchinterest(rock.Rock, LocalPlayer.Character.RightHand, 1)
                    firetouchinterest(rock.Rock, LocalPlayer.Character.LeftHand, 1)
                    ReplicatedStorage.muscleEvent:FireServer("punch", "rightHand")
                    ReplicatedStorage.muscleEvent:FireServer("punch", "leftHand")
                end
            end
            task.wait(0.1)
        end
    end)
end)
OpStuffFolder:AddSwitch("Free AutoLift Gamepass", function(state)
    getgenv().autoLiftGamepass = state
    task.spawn(function()
        while getgenv().autoLiftGamepass and LocalPlayer.Character do
            local gamepasses = ReplicatedStorage:FindFirstChild("gamepassIds")
            if gamepasses then
                local ownedGamepasses = LocalPlayer:FindFirstChild("ownedGamepasses") or Instance.new("Folder", LocalPlayer)
                ownedGamepasses.Name = "ownedGamepasses"
                local autoLift = ownedGamepasses:FindFirstChild("AutoLift") or Instance.new("IntValue", ownedGamepasses)
                autoLift.Name = "AutoLift"
                autoLift.Value = 1
            end
            task.wait(1)
        end
    end)
end)
OpStuffFolder:AddSwitch("Walk on Water", function(state)
    getgenv().walkOnWater = state
    if state then
        local part = Instance.new("Part")
        part.Size = Vector3.new(1000, 1, 1000)
        part.Position = Vector3.new(0, 0, 0)
        part.Anchored = true
        part.Transparency = 0.5
        part.CanCollide = true
        part.Parent = Workspace
        getgenv().waterPart = part
    else
        if getgenv().waterPart then
            getgenv().waterPart:Destroy()
            getgenv().waterPart = nil
        end
    end
end)
OpStuffFolder:AddButton("Remove Ad Portal", function()
    for _, portal in pairs(Workspace:GetDescendants()) do
        if portal.Name:match("AdPortal") then
            portal:Destroy()
        end
    end
end)
 
local KillingTab = Window:AddTab("Killing")
KillingTab:AddSwitch("Auto Equip Punch", function(state)
    getgenv().autoEquipPunch = state
    task.spawn(function()
        while getgenv().autoEquipPunch and LocalPlayer.Character do
            local punch = LocalPlayer.Backpack:FindFirstChild("Punch") or LocalPlayer.Character:FindFirstChild("Punch")
            if punch then
                punch.Parent = LocalPlayer.Character
            else
                LocalPlayer.Character.Humanoid:UnequipTools()
                local backpackPunch = LocalPlayer.Backpack:FindFirstChild("Punch")
                if backpackPunch then
                    backpackPunch.Parent = LocalPlayer.Character
                end
            end
            task.wait(0.5)
        end
    end)
end)
KillingTab:AddSwitch("Auto Punch {With Movement}", function(state)
    getgenv().autoPunchMove = state
    task.spawn(function()
        while getgenv().autoPunchMove and LocalPlayer.Character do
            local punch = LocalPlayer.Character:FindFirstChild("Punch")
            if punch then
                ReplicatedStorage.muscleEvent:FireServer("punch", "rightHand")
                ReplicatedStorage.muscleEvent:FireServer("punch", "leftHand")
                LocalPlayer.Character.HumanoidRootPart.CFrame = LocalPlayer.Character.HumanoidRootPart.CFrame + LocalPlayer.Character.Humanoid.MoveDirection * 0.5
            end
            task.wait(0.1)
        end
    end)
end)
KillingTab:AddSwitch("Auto Punch", function(state)
    getgenv().autopunch = state
    task.spawn(function()
        while getgenv().autopunch and LocalPlayer.Character do
            local punch = LocalPlayer.Character:FindFirstChild("Punch")
            if punch then
                ReplicatedStorage.muscleEvent:FireServer("punch", "rightHand")
                ReplicatedStorage.muscleEvent:FireServer("punch", "leftHand")
            end
            task.wait(0.1)
        end
    end)
end)
KillingTab:AddSwitch("Unlock Fast Punch", function(state)
    getgenv().fastPunch = state
    task.spawn(function()
        while getgenv().fastPunch and LocalPlayer.Character do
            local punch = LocalPlayer.Character:FindFirstChild("Punch")
            if punch then
                ReplicatedStorage.muscleEvent:FireServer("punch", "rightHand")
                ReplicatedStorage.muscleEvent:FireServer("punch", "leftHand")
            end
            task.wait(0.05)
        end
    end)
end)
KillingTab:AddTextBox("Whitelist Player", function(name)
    getgenv().whitelist = getgenv().whitelist or {}
    table.insert(getgenv().whitelist, name)
end)
KillingTab:AddButton("Clear Whitelist", function()
    getgenv().whitelist = {}
end)
KillingTab:AddSwitch("Auto Kill", function(state)
    getgenv().autokill = state
    task.spawn(function()
        while getgenv().autokill and LocalPlayer.Character do
            for _, player in ipairs(Players:GetPlayers()) do
                if player ~= LocalPlayer and not table.find(getgenv().whitelist or {}, player.Name) then
                    if player.Character and player.Character.HumanoidRootPart then
                        LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(player.Character.HumanoidRootPart.Position)
                        ReplicatedStorage.muscleEvent:FireServer("punch", "rightHand")
                        ReplicatedStorage.muscleEvent:FireServer("punch", "leftHand")
                    end
                end
            end
            task.wait(0.1)
        end
    end)
end)
KillingTab:AddSwitch("Auto Kill Players", function(state)
    getgenv().autoKillActive = state
    local function onPlayerAdded(player)
        if getgenv().autoKillActive and player ~= LocalPlayer and not table.find(getgenv().whitelist or {}, player.Name) then
            task.spawn(function()
                while getgenv().autoKillActive and player.Character and LocalPlayer.Character do
                    if player.Character.HumanoidRootPart then
                        LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(player.Character.HumanoidRootPart.Position)
                        ReplicatedStorage.muscleEvent:FireServer("punch", "rightHand")
                        ReplicatedStorage.muscleEvent:FireServer("punch", "leftHand")
                    end
                    task.wait(0.1)
                end
            end)
        end
    end
    Players.PlayerAdded:Connect(onPlayerAdded)
    Players.PlayerRemoving:Connect(function(player)
        if getgenv().autoKillActive then
            onPlayerAdded(player)
        end
    end)
end)
KillingTab:AddDropdown("Players", function()
    local playerNames = {LocalPlayer.Name}
    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= LocalPlayer then
            table.insert(playerNames, player.Name)
        end
    end
    return playerNames
end)
KillingTab:AddTextBox("Kill Player", function(name)
    local target = Players:FindFirstChild(name)
    if target and target.Character and LocalPlayer.Character then
        task.spawn(function()
            while target.Character and LocalPlayer.Character do
                LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(target.Character.HumanoidRootPart.Position)
                ReplicatedStorage.muscleEvent:FireServer("punch", "rightHand")
                ReplicatedStorage.muscleEvent:FireServer("punch", "leftHand")
                task.wait(0.1)
            end
        end)
    end
end)
KillingTab:AddLabel("---------------")
KillingTab:AddTextBox("View Player", function(name)
    local target = Players:FindFirstChild(name)
    if target and target.Character then
        Workspace.CurrentCamera.CameraSubject = target.Character.Humanoid
    end
end)
KillingTab:AddButton("Unview Player", function()
    if LocalPlayer.Character then
        Workspace.CurrentCamera.CameraSubject = LocalPlayer.Character.Humanoid
    end
end)
 
local StatsTab = Window:AddTab("Stats")
local StatsFolder = StatsTab:AddFolder("Stats")
StatsFolder:AddButton("Show Kills Gui", function()
    local leaderstats = LocalPlayer:FindFirstChild("leaderstats")
    if leaderstats then
        local killsLabel = StatsFolder:AddLabel("Kills: " .. (leaderstats.Kills and leaderstats.Kills.Value or 0))
        local strengthLabel = StatsFolder:AddLabel("Strength: " .. (leaderstats.Strength and math.ceil(leaderstats.Strength.Value) or 0))
        local durabilityLabel = StatsFolder:AddLabel("Durability: " .. (leaderstats.Durability and leaderstats.Durability.Value or 0))
        if leaderstats.Kills then
            leaderstats.Kills.Changed:Connect(function(value)
                killsLabel.Text = "Kills: " .. value
            end)
        end
        if leaderstats.Strength then
            leaderstats.Strength.Changed:Connect(function(value)
                strengthLabel.Text = "Strength: " .. math.ceil(value)
            end)
        end
        if leaderstats.Durability then
            leaderstats.Durability.Changed:Connect(function(value)
                durabilityLabel.Text = "Durability: " .. value
            end)
        end
        LocalPlayer.CharacterAdded:Connect(function()
            killsLabel:Destroy()
            strengthLabel:Destroy()
            durabilityLabel:Destroy()
        end)
        LocalPlayer.CharacterRemoving:Connect(function()
            killsLabel:Destroy()
            strengthLabel:Destroy()
            durabilityLabel:Destroy()
        end)
    end
end)
StatsTab:AddFolder("Stats Gained")
local RebirthFolder = StatsTab:AddFolder("Rebirth Calculation")
local rebirthLabels = {
    RebirthsGainedLabel = RebirthFolder:AddLabel("Rebirths Gained In 1 Minute: ..."),
    RebirthsPerMinuteLabel = RebirthFolder:AddLabel("Rebirths Per Minute: ..."),
    RebirthsPerHourLabel = RebirthFolder:AddLabel("Rebirths Per Hour: ..."),
    RebirthsPerDayLabel = RebirthFolder:AddLabel("Rebirths Per Day: ..."),
    RebirthsPerWeekLabel = RebirthFolder:AddLabel("Rebirths Per Week: ...")
}
task.spawn(function()
    local rebirthsStart = 0
    local startTime = os.time()
    while true do
        local leaderstats = LocalPlayer:FindFirstChild("leaderstats")
        if leaderstats and leaderstats.Rebirths then
            local rebirths = leaderstats.Rebirths.Value
            local elapsed = os.time() - startTime
            if elapsed > 0 then
                local perMinute = (rebirths - rebirthsStart) / (elapsed / 60)
                rebirthLabels.RebirthsGainedLabel.Text = "Rebirths Gained In 1 Minute: " .. math.ceil(perMinute)
                rebirthLabels.RebirthsPerMinuteLabel.Text = "Rebirths Per Minute: " .. string.format("%.2f", perMinute)
                rebirthLabels.RebirthsPerHourLabel.Text = "Rebirths Per Hour: " .. string.format("%.2f", perMinute * 60)
                rebirthLabels.RebirthsPerDayLabel.Text = "Rebirths Per Day: " .. string.format("%.2f", perMinute * 60 * 24)
                rebirthLabels.RebirthsPerWeekLabel.Text = "Rebirths Per Week: " .. string.format("%.2f", perMinute * 60 * 24 * 7)
            end
        end
        task.wait(10)
    end
end)
